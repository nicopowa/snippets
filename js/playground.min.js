/*
ILUSIO 2021
The Closure Library Authors - Apache-2.0
*/
(function(){
'use strict';function f(){"PromiseRejectionEvent"in window||Object.assign(window,{PromiseRejectionEvent:function(){}});const a=(...b)=>b.map(c=>JSON.stringify(c,(d,e)=>e?"function"===typeof e?e.toString():e instanceof ErrorEvent?JSON.stringify(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((l,g)=>({...l,[g]:e[g]}),{}),null,"\t"):e instanceof Error?e.toString():e instanceof PromiseRejectionEvent?e.reason.toString():e instanceof Element?(new XMLSerializer).serializeToString(e).replace(/\sxmlns="[^"]+"/,
""):e instanceof Map?Array.from(e.entries()).reduce((l,g)=>[...l,["function"===typeof g[0]?g[0].toString():g[0],g[1]]],[]):e instanceof Set?Array.from(e):"object"===typeof e?JSON.stringify(e):e:String(e),"\t"));["log","warn","error","perf"].forEach(b=>{console[b]=(...c)=>{window.parent.postMessage([...a(b,...c)],"{o}")}});window.addEventListener("unhandledrejection",b=>console.error(b));window.addEventListener("error",b=>console.error(b))}
function h(){window.addEventListener("load",async()=>{pre();let a=performance.now(),b=0,c=()=>{js()};for(;1E3>=performance.now()-a;)c(),b++;post();console.perf(b)})}function k(){window.addEventListener("load",async()=>{try{pre(),js(),post()}catch(a){console.error(a)}})}function m(a){let b=n.find(c=>c.i&&c.i.contentWindow===a.source);b&&b.u.apply(b,a.data.map(c=>JSON.parse(c)))}
function p(a){if(!a.h.length)for(;a.m.firstChild;)a.m.removeChild(a.m.lastChild);let b=n.filter(c=>a.A.includes(c.C)||a.A.includes("#"+c.v)).reduce((c,d)=>{/^p/.test(d.j)?c[d.j]+=d.s+"\n":c[d.o]+=d.s+"\n";return c},{html:"",css:"",js:"",pre:"",post:""});b[a.o]+=a.s;a.g.removeChild(a.i);a.i.srcdoc=q(a,b);a.g.insertBefore(a.i,a.l)}
function q(a,b){let c=/^[^{]+\{([\s\S]+)\}$/g,d=e=>'onerror="console.error(new URIError(event.target.'+e+'));"';return['<html>\n<head>\n<meta http-equiv="content-type" content="text/html; charset=UTF-8">\n<style>\nhtml,body{margin:0;padding:0;width:100%;height:100%;}',b.css,"</style>",...a.D.map(e=>'<link rel="stylesheet" href="'+e+'" '+d("href")+"/>"),"<script>",f.toString().replace(c,"$1").replace("{o}",location.origin),"\x3c/script>",...a.F.map(e=>'<script src="'+e+'" '+d("src")+">\x3c/script>"),
"<script"+(a.G?' type="module"':"")+">",("perf"==a.j?h:k).toString().replace(c,"$1").replace(/(pre|js|post)\(\);?,?/g,(e,l)=>"\n"+b[l].replace(/(console[^)]+\);?)/g,(g,z)=>"perf"==a.j?"":z)+"\n"),"\x3c/script>\n</head>\n<body>",b.html,"</body>\n</html>"].join("\n")}
function r(a,b){a.h.push(b);a.u("log",a.h.length+".",Math.round(b),"ops");9>a.h.length?setTimeout(()=>p(a),5):(a.h.sort((c,d)=>c-d),a.u("log","ops/s median",Math.round((a.h[a.h.length-1>>1]+a.h[a.h.length>>1])/2),"avg",Math.round(a.h.reduce((c,d)=>c+d,0)/a.h.length)),a.h=[])}
class t{constructor(a,b=0){this.B=a;this.v=b||++u;if(b=JSON.parse(decodeURI(a.getAttribute("data-snip")||(/(\{[^}]+\})/.exec(this.s.split("\n",1)[0])||[0]).pop()))){this.C=b.name||"";this.o=/language-(\w+)/.exec(a.className)[1].replace(/j.+t/,"js");this.j=b.hasOwnProperty("type")?b.type:"run";this.G=b.module||!1;this.A=b.link||[];this.D=b.css||[];this.F=b.js||[];this.h=[];if("run"==this.j||"perf"==this.j)this.g=document.createElement("p"),this.g.className+=" snip",a=a.parentNode,!1!==b.insert&&a.parentNode.insertBefore(this.g,
a.nextSibling),a=document.createElement("button"),this.g.appendChild(a),a.addEventListener("click",()=>p(this)),a=document.createElement("a"),a.setAttribute("href","//snipp.et"),a.setAttribute("target","_blank"),this.g.appendChild(a),this.i=document.createElement("iframe"),this.i.setAttribute("sandbox","allow-scripts"+(b.origin?" allow-same-origin":"")),this.i.setAttribute("allow","camera;microphone"),this.g.appendChild(this.i),this.l=document.createElement("div"),this.g.appendChild(this.l),this.m=
document.createElement("div"),this.l.appendChild(this.m),!1===b.body&&(this.g.className+=" snip-nobody"),!1===b.console&&(this.g.className+=" snip-nocons"),b=/(\d+)(\w+)?/.exec(b.height||12),this.i.style.height=this.l.style.minHeight=this.l.style.maxHeight="calc("+(b[2]?b.slice(1).join(""):b[1]+"em")+" + 0.5em)";n.push(this)}}u(...a){let b=a.shift();if("perf"==b)return r(this,+a[0]);let c=new Date,d=document.createElement("span");d.className+=" snip-"+b;d.setAttribute("data-time",(new Date(c-6E4*
c.getTimezoneOffset())).toISOString().slice(-13,-1));d.textContent=a.join(" ");this.m.appendChild(d);this.l.scrollTo(0,this.l.scrollHeight)}get element(){return this.g}get s(){return this.B.innerText.replace(/\u200B/g,"")}}var u,n,v=t,w=["Snippet"],x=this||self;w[0]in x||"undefined"==typeof x.execScript||x.execScript("var "+w[0]);for(var y;w.length&&(y=w.shift());)w.length||void 0===v?x[y]&&x[y]!==Object.prototype[y]?x=x[y]:x=x[y]={}:x[y]=v;
t.remove=function(a){var b=n.findIndex(c=>c.v===a);~b&&(b=n.splice(b,1)[0],b.g&&b.g.parentNode.removeChild(b.g),b=null)};u=0;n=[];window.addEventListener("message",a=>m(a),!1);window.addEventListener("load",()=>new A);function B(a,b,c){var d=document.createElement("div");d.classList.add("code-wrap");a.h.appendChild(d);a=document.createElement("pre");a.classList.add("prism-live");a.classList.add("line-numbers");a.classList.add("editor");d.appendChild(a);d=document.createElement("code");d.classList.add("code");d.classList.add("language-"+b);d.textContent=c;a.appendChild(d);new Prism.Live(a)}
class A{constructor(){this.h=document.querySelector(".content");B(this,"html",'\x3c!-- {"name": "html", "type": ""} --\x3e\n<div class="hello">hello</div>');B(this,"css",String.fromCharCode(47)+'* {"name": "css", "type": ""} */\n.hello {\n\tcolor: #FF0000;\n}');B(this,"js",'// {"name": "js", "type": "run", "link": ["html", "css"]}\nconsole.log("hello");');document.querySelectorAll("code[class*=language-]").forEach(a=>{let b=new t(a);if(b.element){let c=document.createElement("div");c.classList.add("snippet-wrap");
c.appendChild(b.element);a.parentNode.parentNode.parentNode.appendChild(c)}})}};}).call(this);
