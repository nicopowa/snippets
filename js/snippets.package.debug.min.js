/**
 * snippets package debug
 * Â© ILUSIO 2024 https://snipp.et
 * The Closure Library Authors - Apache-2.0
 */
(function(){
var h=this||self;function k(a,b){a=a.split(".");var c=h;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};k("DEBUG",!0);k("STAND",!1);function l(a,b,...c){a=document.createElement(a);c.length&&m(a,...c);b&&b.appendChild(a);return a}function m(a,...b){a.classList.add(...b)}function n(a,...b){a.classList.remove(...b)}
function p(){const a=(...b)=>b.map(c=>JSON.stringify(c,(d,e)=>{if(!e)return String(e);if("function"===typeof e)return e.toString();if(e instanceof ErrorEvent)return JSON.stringify(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((f,g)=>({...f,[g]:e[g]}),{}),null,"\t");if(e instanceof Error)return e.toString();if(e instanceof PromiseRejectionEvent)return e.reason.toString();if(e instanceof Element)return(new XMLSerializer).serializeToString(e).replace(/\sxmlns="[^"]+"/,"");if(e instanceof
Map){let f={};e.forEach((g,q)=>{f[q.toString()]=g});return JSON.stringify(f)}if(e instanceof Set){let f=[];e.forEach(g=>f.push(g));return JSON.stringify(f).replace(/^\[/,"{").replace(/\]$/,"}")}return"object"===typeof e?JSON.stringify(e):e},"\t"));["log","warn","error","evt","perf"].forEach(b=>{console[b]=(...c)=>{window.parent.postMessage([...a(b,...c)],"{o}")}});window.addEventListener("unhandledrejection",b=>console.error(b));window.addEventListener("error",b=>console.error(b))}
function r(){window.addEventListener("load",async()=>{pre();let a=performance.now(),b=0,c=()=>{js()};for(;1E3>=performance.now()-a;)c(),b++;post();console.perf(b)})}function t(){window.addEventListener("load",async()=>{console.evt("load");try{pre(),js(),post()}catch(a){console.error(a)}})}function u(a){let b=v.find(c=>c.A&&c.A.contentWindow===a.source);b&&b.U.apply(b,a.data.map(c=>JSON.parse(c)))}
function w(a){var b=v.findIndex(c=>c.B===a);-1!==b&&(b=v.splice(b,1)[0],console.log("remove snippet",b.B),b.j&&b.j.remove(),b=null)}function x(a){let b="calc("+a.O+"rem + 0.5rem)";var c=a.A;c.style.minHeight=c.style.maxHeight=c.style.height=b;a=a.C;a.style.minHeight=a.style.maxHeight=a.style.height=b}
function y(a){console.log("snippet","#"+a.B,a.s,"run");clearTimeout(a.u);if(!a.g.length)for(;a.h.firstChild;)a.h.removeChild(a.h.lastChild);let b=v.filter(c=>a.o.includes(c.s)||a.o.includes("#"+c.B)).reduce((c,d)=>{console.log("snippet","#"+d.B,d.s,"merge");/^p/.test(d.D)?c[d.D]+=d.H+"\n":c[d.N]+=d.H+"\n";return c},{html:"",css:"",js:"",pre:"",post:""});b[a.N]+=a.H;a.l.removeChild(a.A);a.A.srcdoc=z(a,b);a.C.before(a.A);m(a.m.firstChild,"ing")}
function z(a,b){let c=/^[^{]+\{([\s\S]+)\}$/g,d=e=>'onerror="console.error(new URIError(event.target.'+e+'));"';return['<html>\n<head>\n<meta http-equiv="content-type" content="text/html; charset=UTF-8">\n<style>\nhtml,body{margin:0;padding:0;width:100%;}\nhtml{height:100%;}\nbody{position:absolute;height:100%;min-height:100%;}',b.css,"</style>",...a.$.map(e=>'<link rel="stylesheet" href="'+e+'" '+d("href")+"/>"),"<script>",p.toString().replace(c,"$1").replace(/\{o\}/g,location.origin),"\x3c/script>",
...a.aa.map(e=>'<script src="'+e+'" '+d("src")+">\x3c/script>"),"<script"+(a.ba?' type="module"':"")+">",("perf"===a.D?r:t).toString().replace(c,"$1").replace(/(pre|js|post)\(\);?,?/g,(e,f)=>"\n"+b[f].replace(/(console[^)]+\);?)/g,(g,q)=>"perf"===a.D?"":q)+"\n"),"\x3c/script>\n</head>\n<body>",b.html,"</body>\n</html>"].join("\n")}
function A(a,b){a.g.push(b);a.U("log",a.g.length+".",Math.round(b),"ops");9>a.g.length?setTimeout(()=>y(a),5):(a.g.sort((c,d)=>c-d),a.U("log","ops/s median",Math.round((a.g[a.g.length-1>>1]+a.g[a.g.length>>1])/2),"avg",Math.round(a.g.reduce((c,d)=>c+d,0)/a.g.length)),a.g=[])}function B(a,b){"load"===b&&(console.log("snippet","#"+a.B,a.s,"loaded"),a.u=setTimeout(()=>n(a.m.firstChild,"ing"),1E3))}
function C(a,b,...c){let d=new Date,e=l("span",a.h,"snip-"+b);e.setAttribute("data-time",(new Date(d-6E4*d.getTimezoneOffset())).toISOString().slice(-13,-1));e.textContent=c.join(" ");a.C.scrollTo(0,a.C.scrollHeight);"error"==b&&a.j.classList.contains("nolog")&&(console.log("RED ALERT"),m(a.j,"err"))}
class D{constructor(a,b=0){this.na=a;this.B=b||++E;(b=JSON.parse(decodeURI(a.getAttribute("data-snip")||(/(\{[^}]+\})/.exec(this.H.split("\n",1)[0])||[0]).pop())))?(this.s=b.name||"",this.N=/language-(\w+)/.exec(a.className)[1].replace(/j.+t/,"js"),this.D=b.hasOwnProperty("type")?b.type:"run",this.u=-1,this.o=b.link||[],this.$=b.css||[],this.aa=b.js||[],this.ba=!0===b.module,this.g=[],console.log("snippet","#"+this.B,this.s),["run","perf"].includes(this.D)&&(this.j=l("div",null,"snip"),!1!==b.insert&&
a.parentNode.after(this.j),this.m=l("span",this.j),this.m.addEventListener("click",c=>{c=c.target;switch([...c.parentNode.children].indexOf(c)){case 0:y(this);break;case 1:document.fullscreenElement?document.exitFullscreen():this.j.requestFullscreen();break;case 2:this.j.classList.toggle("noone");break;case 3:this.j.classList.toggle("nolog");n(this.j,"err");break;case 4:this.O--;x(this);break;case 5:this.O++,x(this)}}),Array(6).fill(0).forEach(()=>l("div",this.m)),this.j.addEventListener("fullscreenchange",
()=>(document.fullscreenElement?m:n).apply(D,[this.j,"full"])),this.l=l("div",this.j),this.A=l("iframe",this.l),this.A.sandbox="allow-scripts",this.C=l("div",this.l),this.h=l("div",this.C),!1===b.body&&m(this.j,"noone"),!1===b.console&&m(this.j,"nolog"),a=l("a",this.l),a.href="//snipp.et",a.target="_blank",this.O=+(b.height||12),x(this)),v.push(this)):console.log("invalid or missing options")}U(...a){let b=a.shift();"perf"===b?A(this,+a[0]):"evt"===b?B(this,...a):C(this,b,...a)}get id(){return this.B}get wrap(){return this.j}get frame(){return this.A}get console(){return this.C}get size(){return this.O}get H(){return this.na.innerText.replace(/\u200B/g,
"")}set module(a){this.ba=a}set G(a){this.aa=a}set oa(a){this.$=a}}var E,v;k("Snippet",D);D.remove=w;E=0;v=[];window.addEventListener("message",a=>u(a),!1);window.addEventListener("load",()=>new F);function G(a,b=document.body){return b.querySelector(a)}function H(a,...b){return I(a,"div","",...b)}function I(a,b,c,...d){b=document.createElement(b);c&&(b.innerHTML=c);J(b,...d);a&&a.appendChild(b);return b}function K(a){a.h=JSON.parse(window.localStorage.getItem(a.s)||"[]");a.h.forEach(b=>L(a,b))}
function aa(a){M(a,a.R,a.ka);M(a,a.u,b=>b.target.classList.contains("cmd")&&ba(a,b.target));(new Map([[a.ha,a.V],[a.I,a.Y],[a.L,a.ea],[a.W,a.fa],[a.la,a.ga]])).forEach((b,c)=>M(a,c,b));M(a,document,b=>{(b.ctrlKey||b.metaKey)&&"rs".includes(b.key)&&(b.preventDefault(),"s"===b.key?a.Y(b):"r"===b.key&&N(a))},"keydown");window.addEventListener("hashchange",()=>O(a),!1)}function O(a){P(a);Q(a);ca(a).then(b=>R(a,b))}function M(a,b,c,d="click"){b.addEventListener(d,e=>c.bind(a)(e))}
function ba(a,b){switch(a.da.find(c=>b.classList.contains(c))){case "delete":J(b,"del-yes");break;case "del-yes":da(a);break;case "del-no":S()}}function P(a){[a.S,a.R].forEach(b=>J(b,"hide"))}function Q(a){a.g&&a.u.remove();a.g="";Object.keys(a.l).forEach(b=>{w(a.l[b].id);a.F[b]=null;a.G[b].remove()});a.l={};a.F={};a.G={}}
function ca(a){let b=location.hash.slice(1);console.log("hash",b);return"about"==b?T("H4sIAAAAAAAACo1VS08bMRD+L5Ymp4C2dlXaSDnAkrSqQKoI5YI4OLuTrIPtWdleHqr63yvbmwQoCdmT5/XNzDdjr6nHgyYYPQZRNhzExFvVtscYQJTAp0kFxSmIstP9sfgGotQKxMR1Fnjx4/ryAnhRzmbAi5+zHJjsr70tAS9kVVFnA/ASeJE0FdG9Qv9CU8sg59LjTqRUIwYf8RwCL3wghzXwQtkQETRVUs8CObmMKHMHfApiQm7r8vsqFt1I3/SZ8QGj2WOsrkg+oUng6KLpdTFJ2lAiykaAmFRkgyPte+7EPu6Ac4uPwDnwAsRpJMKhDDGhjElzizspAM69fMAcn/oqr2NHZ3EIsVtelJfnaznhZ/9DkNNc3wJfvQG+2gDnNTik4iaNa9tyr9jERsoddcvm9YD2QNadaV8i4lNLLmwh/XqWC6V3LxRwrknWL4GU+R9o4ci8D/XuOpg6rbcx0tYH7YSyHlPOWMjnYhVzNiG0PpU0jSmcPo7tTGMNx9GBrxvMDcQL+EGzb7JU/qM0yeNtnnzdD6WiclircBAJN9IqreWeh+SXU96k+r8AL9bShUrrPX+OZ4x36AYddTtRSk2+S9tXkmmVTrc/RX8nWu7hbyYTY8k1vxC9JqA0O8kYVN6P51THKDg5y5CtrGtll0caFyGv3Sc0IHorPaBbaHo8esq2RtU12o15QTYcLaRR+jnbDVnyrawwv2hbcR1RkSaXfYGLr+nrjSfng5UfD8JYzqkLAzf+w6w0yEZs5dmQhec2nl1n2ZA1qJZNYCPxbchiR2wUXIdDVpH1pJGNFlJ7HLK8aBtx5dno9m7IKt8ftLL3bHTL4v+HZf3d33/LjWAMkQYAAA=="):20>=
b.length?ea(a,b):T(b)}
function R(a,b={}){window.scroll(0,0);let c=b.t||"untitled";document.title=a.o.value=c;a.m=b.v||0;a.T={...a.ia,...("string"===typeof b.r?JSON.parse(b.r||"{}"):b.r)};console.log("load",c,"v"+a.m);a.M.slice(0,-1).forEach(d=>U(a,d,{name:d,type:""},b[d]||""));U(a,"js",a.T,b.js||"");a.ja.appendChild(a.l.js.wrap);a.l.js.frame.title=a.o.value;a.g?(a.K.appendChild(a.u),V(a.I,"no"),S()):(Object.keys(b).length||(console.log("no data"),console.log("clear hash"),history.pushState("",document.title,window.location.pathname+
window.location.search)),J(a.I,"no"));W(a);a.M.slice(-3).map(d=>a.l[d].H.length).some(d=>0<d)?N(a):console.log("nothing to run")}async function T(a){try{let b=await fa(a);return b.startsWith("md=")?Object.fromEntries(new URLSearchParams(b)):JSON.parse(b)}catch(b){return console.error(b),{}}}async function ea(a,b){return a.h.some(c=>c.i===b)?(a.g=b,await T(window.localStorage.getItem("snippet-"+b)||"")):{}}function N(a){window.scroll(0,0);ha(a);y(a.l.js)}
async function fa(a){console.log("decompress",a.length);return await (new Response((new Response(Uint8Array.from(atob(a),b=>b.charCodeAt(0)))).body.pipeThrough(new DecompressionStream("gzip")))).text()}
function U(a,b,c,d){let e=H(a.K,"code");I(e,"div",b,"lang");let f=I(e,"pre","","prism-live","line-numbers"),g=I(f,"code","","code","language-"+b);g.setAttribute("data-snip",encodeURI(JSON.stringify(c)));g.textContent=d;a.G[b]=e;c=new Prism.Live(f);c.textarea.setAttribute("aria-label","code-"+b);a.F[b]=c;a.l[b]=new D(g)}function V(a,...b){a.classList.remove(...b)}function S(){V(G(".cmd.delete"),"del-yes")}function J(a,...b){a.classList.add(...b)}
function W(a){document.title=a.o.value;a.ma.innerHTML="v"+Math.floor(a.m/100)+"."+a.m.toString().padStart(3,"0").slice(-2).split("").join(".")}function ha(a){var b={js:[],css:[]};b=Object.keys(b).reduce((c,d)=>{Array.from(a.F.md.textarea.value.matchAll(new RegExp("^@("+d+")\\s(.+)$","gm"))).forEach(e=>c[e[1]].push(e[2]));return c},b);Object.assign(a.l.js,{G:b.js,oa:b.css})}
function da(a){a.h.splice(a.h.findIndex(b=>b.i===a.g),1);X(a);G("[href='#"+a.g+"']",a.P).parentNode.remove();window.localStorage.removeItem("snippet-"+a.g);S();a.V()}function ia(a){[a.S,a.R].forEach(b=>V(b,"hide"))}function L(a,b){a=I(a.P,"li","","menuitem");I(a,"a",b.t).setAttribute("href","#"+b.i)}async function ja(a){return btoa((new Uint8Array(await (new Response((new Response(a)).body.pipeThrough(new CompressionStream("gzip")))).arrayBuffer())).reduce((b,c)=>b+String.fromCharCode(c),""))}
async function Y(a,b={}){let c=a.l.js,d=c.wrap;b=JSON.stringify({...a.M.reduce((e,f)=>({...e,[f]:a.F[f].textarea.value}),{t:a.o.value,r:{...a.T,height:c.size,body:!d.classList.contains("noone"),console:!d.classList.contains("nolog")},...b})});console.log("compress",b.length);b=await ja(b);console.log("compressed",b.length);return b}function ka(a){console.log("set hash",a);history.replaceState(a,"","#"+a)}function X(a){window.localStorage.setItem(a.s,JSON.stringify(a.h))}
function Z(a,b=!0){let c=b?"yes":"no";J(a,c);setTimeout(()=>V(a,c),750)}
class F{constructor(){this.s="snippets";this.M=["md","html","css","js"];this.da=["del-yes","del-no","delete"];this.ia={name:"js",type:"run",height:18,body:!0,console:!0,insert:!1,js:[],css:[],link:this.M.slice(1,-1)};this.g="";this.m=0;this.T={};this.G={};this.l={};this.F={};this.h=[];this.J=G(".header");this.K=G(".content");this.S=G(".menu");this.Z=G(".menutools");this.X=G(".moretools");this.P=G(".menulist");this.R=H(this.J,"menubtn","hide");this.ja=H(this.K,"wrap");this.o=I(this.J,"input","","snippet-title");
this.o.placeholder="title...";H(this.J,"space");this.I=H(this.J,"save");this.L=H(this.J,navigator.canShare?"share":"copy");this.ha=H(this.Z,"create");this.ca=I(this.Z,"a","","about");this.ca.setAttribute("href","#about");this.W=H(this.X,"export");this.la=H(this.X,"import");this.u=H(null,"cmds");this.ma=H(this.u,"version");let a=H(this.u,"cmd","delete");H(a,"del-space");H(a,"cmd","del-no");K(this);aa(this);O(this)}ka(){this.S.classList.contains("hide")?ia(this):P(this)}V(){P(this);Q(this);R(this)}async Y(a){console.log("save",
a.target);if(this.g){if(a=this.h.find(b=>b.i===this.g))this.m++,a.t=this.o.value,a.v=this.m,G("[href='#"+this.g+"']",this.P).innerHTML=a.t}else this.g=Date.now().toString(36)+Math.random().toString(36).slice(2),this.m=0,a={i:this.g,v:this.m,t:this.o.value},this.h.push(a),L(this,a),V(this.I,"no"),this.K.appendChild(this.u),ka(this.g);window.localStorage.setItem("snippet-"+this.g,await Y(this,{i:this.g,v:this.m}));X(this);W(this);S();Z(this.I)}async ea(){let a=location.origin+location.pathname+"#"+
await Y(this);if(navigator.canShare)navigator.share({title:this.o.value,url:a});else if(navigator.clipboard)navigator.clipboard.writeText(a).then(()=>Z(this.L));else{let b=document.createElement("textarea");b.value=a;b.style.display="none";document.body.appendChild(b);b.focus();b.select();try{document.execCommand("copy"),Z(this.L)}catch(c){Z(this.L,!1)}document.body.removeChild(b)}}fa(){let a=this.h.reduce((c,d)=>{d=d.i;c[d]=window.localStorage.getItem("snippet-"+d)||"";return c},{[this.s]:this.h}),
b=document.createElement("a");b.setAttribute("href","data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(a)));b.setAttribute("download",this.s+".json");b.style.display="none";document.body.appendChild(b);b.click();b.remove();Z(this.W)}ga(){let a=document.createElement("input");a.type="file";a.accept="application/json";a.style.display="none";document.body.appendChild(a);a.addEventListener("change",()=>{if(a.files.length){let b=a.files[0],c=new FileReader;c.addEventListener("loadend",
d=>{try{let e=JSON.parse(d.target.result);e.snippets.filter(f=>e[f.i]).forEach(f=>{console.log(f);let g=this.h.find(q=>q.i===f.i);if(g&&g.v>g.v||!g)window.localStorage.setItem("snippet-"+f.i,e[f.i]),L(this,f),this.h.push(f),X(this)})}catch(e){}});c.readAsText(b)}a.remove()});a.click()}};}).call(this);
