/**
 * snippetplayground package release
 * Â© ILUSIO 2023 https://snipp.et
 * The Closure Library Authors - Apache-2.0
 */
(function(){
var g=this||self;function l(a,b){a=a.split(".");var c=g;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};l("DEBUG",!1);l("STAND",!1);function n(a){if(!a.g.length)for(;a.j.firstChild;)a.j.removeChild(a.j.lastChild);let b=p.g.filter(c=>a.s.includes(c.I)||a.s.includes("#"+c.u)).reduce((c,d)=>{/^p/.test(d.o)?c[d.o]+=d.A+"\n":c[d.v]+=d.A+"\n";return c},{html:"",css:"",js:"",pre:"",post:""});b[a.v]+=a.A;a.h.removeChild(a.m);a.m.srcdoc=q(a,b);a.h.insertBefore(a.m,a.i)}
function q(a,b){let c=/^[^{]+\{([\s\S]+)\}$/g,d=e=>'onerror="console.error(new URIError(event.target.'+e+'));"';return['<html>\n<head>\n<meta http-equiv="content-type" content="text/html; charset=UTF-8">\n<style>\nhtml,body{margin:0;padding:0;width:100%;height:100%;}',b.css,"</style>",...a.B.map(e=>'<link rel="stylesheet" href="'+e+'" '+d("href")+"/>"),"<script>",p.i.toString().replace(c,"$1").replace("{o}",location.origin),"\x3c/script>",...a.D.map(e=>'<script src="'+e+'" '+d("src")+">\x3c/script>"),
"<script"+(a.F?' type="module"':"")+">",("perf"===a.o?p.j:p.l).toString().replace(c,"$1").replace(/(pre|js|post)\(\);?,?/g,(e,f)=>"\n"+b[f].replace(/(console[^)]+\);?)/g,(k,h)=>"perf"===a.o?"":h)+"\n"),"\x3c/script>\n</head>\n<body>",b.html,"</body>\n</html>"].join("\n")}
function r(a,b){a.g.push(b);a.G("log",a.g.length+".",Math.round(b),"ops");9>a.g.length?setTimeout(()=>n(a),5):(a.g.sort((c,d)=>c-d),a.G("log","ops/s median",Math.round((a.g[a.g.length-1>>1]+a.g[a.g.length>>1])/2),"avg",Math.round(a.g.reduce((c,d)=>c+d,0)/a.g.length)),a.g=[])}function t(a){let b=p.g.find(c=>c.m&&c.m.contentWindow===a.source);b&&b.G.apply(b,a.data.map(c=>JSON.parse(c)))}
class p{constructor(a,b=0){this.H=a;this.u=b||++p.u;if(b=JSON.parse(decodeURI(a.getAttribute("data-snip")||(/(\{[^}]+\})/.exec(this.A.split("\n",1)[0])||[0]).pop()))){this.I=b.name||"";this.v=/language-(\w+)/.exec(a.className)[1].replace(/j.+t/,"js");this.o=b.hasOwnProperty("type")?b.type:"run";this.F=b.module||!1;this.s=b.link||[];this.B=b.css||[];this.D=b.js||[];this.g=[];if("run"==this.o||"perf"==this.o)this.h=document.createElement("div"),this.h.className+=" snip",a=a.parentNode,!1!==b.insert&&
a.parentNode.insertBefore(this.h,a.nextSibling),this.l=document.createElement("span"),this.h.appendChild(this.l),a=document.createElement("button"),this.l.appendChild(a),a.addEventListener("click",()=>n(this)),b.full&&document.fullscreenEnabled&&(a=document.createElement("button"),this.l.appendChild(a),a.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():this.h.requestFullscreen()}),this.h.addEventListener("fullscreenchange",()=>{[this.l,this.m].map(c=>c.classList).forEach(c=>
document.fullscreenElement?c.add("full"):c.remove("full"));n(this)})),a=document.createElement("a"),a.setAttribute("href","//snipp.et"),a.setAttribute("target","_blank"),this.l.appendChild(a),this.m=document.createElement("iframe"),this.m.setAttribute("sandbox","allow-scripts"),this.h.appendChild(this.m),this.i=document.createElement("div"),this.h.appendChild(this.i),this.j=document.createElement("div"),this.i.appendChild(this.j),!1===b.body&&(this.h.className+=" snip-nobody"),!1===b.console&&(this.h.className+=
" snip-nocons"),b=/(\d+)(\w+)?/.exec(b.height||12),this.C="calc("+(b[2]?b.slice(1).join(""):b[1]+"em")+" + 0.5em)",this.m.style.height=this.i.style.minHeight=this.i.style.maxHeight=this.C;p.g.push(this)}}G(...a){let b=a.shift();if("perf"==b)return r(this,+a[0]);let c=new Date,d=document.createElement("span");d.className+=" snip-"+b;d.setAttribute("data-time",(new Date(c-6E4*c.getTimezoneOffset())).toISOString().slice(-13,-1));d.textContent=a.join(" ");this.j.appendChild(d);this.i.scrollTo(0,this.i.scrollHeight)}get element(){return this.h}get A(){return this.H.innerText.replace(/\u200B/g,
"")}static remove(a){var b=p.g.findIndex(c=>c.u===a);-1!==b&&(b=p.g.splice(b,1)[0],b.h&&b.h.parentNode.removeChild(b.h),b=null)}static i(){const a=(...b)=>b.map(c=>JSON.stringify(c,(d,e)=>{if(!e)return String(e);if("function"===typeof e)return e.toString();if(e instanceof ErrorEvent)return JSON.stringify(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((f,k)=>({...f,[k]:e[k]}),{}),null,"\t");if(e instanceof Error)return e.toString();if(e instanceof PromiseRejectionEvent)return e.reason.toString();
if(e instanceof Element)return(new XMLSerializer).serializeToString(e).replace(/\sxmlns="[^"]+"/,"");if(e instanceof Map){let f={};e.forEach((k,h)=>{f[h.toString()]=k});return JSON.stringify(f)}if(e instanceof Set){let f=[];e.forEach(k=>f.push(k));return JSON.stringify(f).replace(/^\[/,"{").replace(/\]$/,"}")}return"object"===typeof e?JSON.stringify(e):e},"\t"));["log","warn","error","perf"].forEach(b=>{console[b]=(...c)=>{window.parent.postMessage([...a(b,...c)],"{o}")}});window.addEventListener("unhandledrejection",
b=>console.error(b));window.addEventListener("error",b=>console.error(b))}static l(){window.addEventListener("load",async()=>{try{pre(),js(),post()}catch(a){console.error(a)}})}static j(){window.addEventListener("load",async()=>{pre();let a=performance.now(),b=0,c=()=>{js()};for(;1E3>=performance.now()-a;)c(),b++;post();console.perf(b)})}}l("Snippet",p);p.u=0;p.g=[];window.addEventListener("message",a=>t(a),!1);window.addEventListener("load",()=>new u);async function v(a){await w(a);x(a.g,"saved")}async function y(a){await w(a);navigator.clipboard.writeText(location.href).then(()=>x(a.i,"shared")).catch(()=>{})}
async function z(a){let b=['{"name": "html", "type": ""}','{"name": "css", "type": ""}','{"name": "js", "type": "run", "height": "13", "insert": false, "link": ["html", "css"]}'],c=['<div class="helloworld">helloworld \ud83c\udf08</div>',".helloworld {\n\tcolor: #0077FF;\n}",'console.log("helloworld \ud83c\udf08");'];try{let d=Object.fromEntries(new URLSearchParams(await A().catch(()=>({}))));console.log(d);["html","css","js"].forEach((e,f)=>{var k=b[f];f=d.hasOwnProperty(e)&&d[e]||c[f];var h=document.createElement("div");
h.classList.add("code-wrap");a.B.appendChild(h);let m=document.createElement("pre");m.classList.add("prism-live","line-numbers");h.appendChild(m);h=document.createElement("code");h.classList.add("code","language-"+e);h.setAttribute("data-snip",encodeURI(k));h.textContent=f;m.appendChild(h);a.D[e]=new Prism.Live(m);a.j[e]=new p(h);a.j[e].element&&a.s.appendChild(a.j[e].element)})}catch(d){console.error(d)}}
async function A(){return await (new Response((new Response(Uint8Array.from(atob(location.hash.slice(1)),a=>a.charCodeAt(0)))).body.pipeThrough(new DecompressionStream("gzip")))).text()}async function B(a){return btoa(String.fromCharCode(...(new Uint8Array(await (new Response((new Response(a)).body.pipeThrough(new CompressionStream("gzip")))).arrayBuffer()))))}async function w(a){location.hash=await B(["html","css","js"].map(b=>b+"="+encodeURIComponent(a.D[b].textarea.value)).join("&"))}
function x(a,b){a.classList.toggle(b);setTimeout(()=>a.classList.toggle(b),500)}
class u{constructor(){this.C=document.querySelector(".header");this.B=document.querySelector(".content");this.j={};this.D={};this.s=document.createElement("div");this.s.classList.add("snippet-wrap");this.B.appendChild(this.s);this.F=document.createElement("div");this.F.classList.add("snippet-title");this.C.appendChild(this.F);this.l=document.createElement("div");this.l.classList.add("snippet-tools");this.C.appendChild(this.l);this.g=document.createElement("div");this.g.classList.add("snippet-save");
this.l.appendChild(this.g);this.g.addEventListener("click",()=>v(this));this.i=document.createElement("div");this.i.classList.add("snippet-share");this.l.appendChild(this.i);this.i.addEventListener("click",()=>y(this));document.addEventListener("keydown",a=>{(a.ctrlKey||a.metaKey)&&"rs".includes(a.key)&&(a.preventDefault(),"s"===a.key?v(this):"r"===a.key&&n(this.j.js))});z(this)}};}).call(this);
