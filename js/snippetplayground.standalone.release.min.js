/**
 * snippetplayground standalone release
 * Â© ILUSIO 2023 https://snipp.et
 * The Closure Library Authors - Apache-2.0
 */
(function(){
var g=this||self;function l(a,b){a=a.split(".");var c=g;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};l("DEBUG",!1);l("STAND",!1);function m(a){if(!a.g.length)for(;a.j.firstChild;)a.j.removeChild(a.j.lastChild);let b=n.g.filter(c=>a.s.includes(c.G)||a.s.includes("#"+c.v)).reduce((c,d)=>{/^p/.test(d.o)?c[d.o]+=d.B+"\n":c[d.A]+=d.B+"\n";return c},{html:"",css:"",js:"",pre:"",post:""});b[a.A]+=a.B;a.h.removeChild(a.m);a.m.srcdoc=p(a,b);a.h.insertBefore(a.m,a.i)}
function p(a,b){let c=/^[^{]+\{([\s\S]+)\}$/g,d=e=>'onerror="console.error(new URIError(event.target.'+e+'));"';return['<html>\n<head>\n<meta http-equiv="content-type" content="text/html; charset=UTF-8">\n<style>\nhtml,body{margin:0;padding:0;width:100%;height:100%;}',b.css,"</style>",...a.u.map(e=>'<link rel="stylesheet" href="'+e+'" '+d("href")+"/>"),"<script>",n.i.toString().replace(c,"$1").replace("{o}",location.origin),"\x3c/script>",...a.H.map(e=>'<script src="'+e+'" '+d("src")+">\x3c/script>"),
"<script"+(a.I?' type="module"':"")+">",("perf"===a.o?n.j:n.l).toString().replace(c,"$1").replace(/(pre|js|post)\(\);?,?/g,(e,h)=>"\n"+b[h].replace(/(console[^)]+\);?)/g,(f,k)=>"perf"===a.o?"":k)+"\n"),"\x3c/script>\n</head>\n<body>",b.html,"</body>\n</html>"].join("\n")}
function q(a,b){a.g.push(b);a.D("log",a.g.length+".",Math.round(b),"ops");9>a.g.length?setTimeout(()=>m(a),5):(a.g.sort((c,d)=>c-d),a.D("log","ops/s median",Math.round((a.g[a.g.length-1>>1]+a.g[a.g.length>>1])/2),"avg",Math.round(a.g.reduce((c,d)=>c+d,0)/a.g.length)),a.g=[])}function r(a){let b=n.g.find(c=>c.m&&c.m.contentWindow===a.source);b&&b.D.apply(b,a.data.map(c=>JSON.parse(c)))}
class n{constructor(a,b=0){this.F=a;this.v=b||++n.v;if(b=JSON.parse(decodeURI(a.getAttribute("data-snip")||(/(\{[^}]+\})/.exec(this.B.split("\n",1)[0])||[0]).pop()))){this.G=b.name||"";this.A=/language-(\w+)/.exec(a.className)[1].replace(/j.+t/,"js");this.o=b.hasOwnProperty("type")?b.type:"run";this.I=b.module||!1;this.s=b.link||[];this.u=b.css||[];this.H=b.js||[];this.g=[];if("run"==this.o||"perf"==this.o)this.h=document.createElement("p"),this.h.className+=" snip",a=a.parentNode,!1!==b.insert&&
a.parentNode.insertBefore(this.h,a.nextSibling),this.l=document.createElement("span"),this.h.appendChild(this.l),a=document.createElement("button"),this.l.appendChild(a),a.addEventListener("click",()=>m(this)),b.full&&document.fullscreenEnabled&&(a=document.createElement("button"),this.l.appendChild(a),a.addEventListener("click",()=>{document.fullscreenElement?document.exitFullscreen():this.h.requestFullscreen()}),this.h.addEventListener("fullscreenchange",()=>{[this.l,this.m].map(c=>c.classList).forEach(c=>
document.fullscreenElement?c.add("full"):c.remove("full"));m(this)})),a=document.createElement("a"),a.setAttribute("href","//snipp.et"),a.setAttribute("target","_blank"),this.l.appendChild(a),this.m=document.createElement("iframe"),this.m.setAttribute("sandbox","allow-scripts"),this.h.appendChild(this.m),this.i=document.createElement("div"),this.h.appendChild(this.i),this.j=document.createElement("div"),this.i.appendChild(this.j),!1===b.body&&(this.h.className+=" snip-nobody"),!1===b.console&&(this.h.className+=
" snip-nocons"),b=/(\d+)(\w+)?/.exec(b.height||12),this.C="calc("+(b[2]?b.slice(1).join(""):b[1]+"em")+" + 0.5em)",this.m.style.height=this.i.style.minHeight=this.i.style.maxHeight=this.C;n.g.push(this)}}D(...a){let b=a.shift();if("perf"==b)return q(this,+a[0]);let c=new Date,d=document.createElement("span");d.className+=" snip-"+b;d.setAttribute("data-time",(new Date(c-6E4*c.getTimezoneOffset())).toISOString().slice(-13,-1));d.textContent=a.join(" ");this.j.appendChild(d);this.i.scrollTo(0,this.i.scrollHeight)}get element(){return this.h}get B(){return this.F.innerText.replace(/\u200B/g,
"")}static remove(a){var b=n.g.findIndex(c=>c.v===a);-1!==b&&(b=n.g.splice(b,1)[0],b.h&&b.h.parentNode.removeChild(b.h),b=null)}static i(){const a=(...b)=>b.map(c=>JSON.stringify(c,(d,e)=>{if(!e)return String(e);if("function"===typeof e)return e.toString();if(e instanceof ErrorEvent)return JSON.stringify(Object.getOwnPropertyNames(Object.getPrototypeOf(e)).reduce((h,f)=>({...h,[f]:e[f]}),{}),null,"\t");if(e instanceof Error)return e.toString();if(e instanceof PromiseRejectionEvent)return e.reason.toString();
if(e instanceof Element)return(new XMLSerializer).serializeToString(e).replace(/\sxmlns="[^"]+"/,"");if(e instanceof Map){let h={};e.forEach((f,k)=>{h[k.toString()]=f});return JSON.stringify(h)}if(e instanceof Set){let h=[];e.forEach(f=>h.push(f));return JSON.stringify(h).replace(/^\[/,"{").replace(/\]$/,"}")}return"object"===typeof e?JSON.stringify(e):e},"\t"));["log","warn","error","perf"].forEach(b=>{console[b]=(...c)=>{window.parent.postMessage([...a(b,...c)],"{o}")}});window.addEventListener("unhandledrejection",
b=>console.error(b));window.addEventListener("error",b=>console.error(b))}static l(){window.addEventListener("load",async()=>{try{pre(),js(),post()}catch(a){console.error(a)}})}static j(){window.addEventListener("load",async()=>{pre();let a=performance.now(),b=0,c=()=>{js()};for(;1E3>=performance.now()-a;)c(),b++;post();console.perf(b)})}}l("Snippet",n);n.remove=n.remove;n.v=0;n.g=[];window.addEventListener("message",a=>r(a),!1);window.addEventListener("load",()=>new t);function u(a){v(a);navigator.clipboard.writeText(location.href).then(()=>w(a.i,"shared")).catch(()=>{})}function v(a){location.hash=btoa(["html","css","js"].map(b=>b+"="+encodeURIComponent(a.C[b].textarea.value)).join("&"))}function w(a,b){a.classList.toggle(b);setTimeout(()=>a.classList.toggle(b),750)}
class t{constructor(){this.l=document.querySelector(".content");let a=['{"name": "html", "type": ""}','{"name": "css", "type": ""}','{"name": "js", "type": "run", "height": "13", "insert": false, "link": ["html", "css"]}'],b=['<div class="helloworld">helloworld \ud83c\udf08</div>',".helloworld {\n\tcolor: #0077FF;\n}",'console.log("helloworld \ud83c\udf08");'];this.u={};this.C={};this.s=document.createElement("div");this.s.classList.add("snippet-wrap");this.l.appendChild(this.s);this.j=document.createElement("div");
this.j.classList.add("snippet-tools");this.l.appendChild(this.j);this.g=document.createElement("div");this.g.classList.add("snippet-save");this.j.appendChild(this.g);this.g.addEventListener("click",()=>{v(this);w(this.g,"saved")});this.i=document.createElement("div");this.i.classList.add("snippet-share");this.j.appendChild(this.i);this.i.addEventListener("click",()=>u(this));try{let c=Object.fromEntries(new URLSearchParams(atob(location.hash.slice(1))));["html","css","js"].forEach((d,e)=>{var h=a[e];
e=c.hasOwnProperty(d)&&c[d]||b[e];var f=document.createElement("div");f.classList.add("code-wrap");this.l.appendChild(f);let k=document.createElement("pre");k.classList.add("prism-live","line-numbers");f.appendChild(k);f=document.createElement("code");f.classList.add("code","language-"+d);f.setAttribute("data-snip",encodeURI(h));f.textContent=e;k.appendChild(f);this.C[d]=new Prism.Live(k);this.u[d]=new n(f);this.u[d].element&&this.s.appendChild(this.u[d].element)})}catch(c){console.error(c)}document.addEventListener("keydown",
c=>{c.ctrlKey&&"s"===c.key&&(c.preventDefault(),v(this),w(this.g,"saved"))})}};}).call(this);
